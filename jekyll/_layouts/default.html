{% for article in site.articles %}
	{% if page.url == article.url %}
		{% assign current_article = article %}
		{% assign current_article_source_url = "https://github.com/bitrise-io/devcenter/blob/master/docs" | append: article.url | append: ".md" %}
	{% endif %}
{% endfor %}

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{{ site.data.basic_info.name }}</title>
		<meta property="og:title" content="{{ site.data.basic_info.name }}">
		<meta property="og:locale" content="en_US">
		<meta property="og:url" content="{{ site.data.basic_info.page_url }}">
		<meta property="og:site_name" content="{{ site.data.basic_info.name }}">
		<meta name="theme-color" content="{{ site.data.colors.deep_purple }}">
		<link rel="canonical" href="{{ site.data.basic_info.page_url }}">
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="/assets/main.css">
		<script src="/assets/javascripts/simple-jekyll-search.min.js"></script>
	</head>
	<body class="mdc-typography">
		<header class="top-bar">
			<div class="middle-aligner">
				<a class="logo" href="/"><img src="/assets/logo.svg"></a>
				<button class="burger material-icon" onclick="toggleSideBar()"></button>
				<div class="title">
					{% if current_article %}
						{{ current_article.title }}
					{% else %}
						{{ site.data.basic_info.name }}
					{% endif %}
				</div>
				<div class="search-bar">
					<div class="input-wrapper">
						<label class="material-icon"></label>
						<input type="text" id="search-input" placeholder="Search">
					</div>
					<ul id="results-container"></ul>
				</div>
			</div>
		</header>
		<div class="column-parent middle-aligner">
			<nav id="side-menu">
				<label>{{ site.data.basic_info.name }}</label>
				<ol>
					{% for article in site.articles %}
						{% assign groups = "" | split: ", " %}
						{% assign _path_parts = article.path | split: "/" %}
						{% for _path_part in _path_parts %}
							{% if _path_part == _path_parts.first or _path_part == _path_parts.last %}
								{% continue %}
							{% endif %}
							{% assign _words = _path_part | split: "-" %}
							{% assign _group_name = "" %}
							{% for _word in _words %}
								{% assign _capitalized_word = _word | capitalize %}
								{% assign _group_name = _group_name | append: " " | append: _capitalized_word %}
							{% endfor %}
							{% assign _group_name_as_array = _group_name | split: "-" %}
							{% assign groups = groups | concat: _group_name_as_array %}
						{% endfor %}

						<li>
							{% assign anchor_title = groups | join: " /" | append: " / " | append: article.title  %}

							{% if article == current_article %}
								<a href="{{ article.url }}" class="active">{{ anchor_title }}</a>
							{% else %}
								<a href="{{ article.url }}">{{ anchor_title }}</a>
							{% endif %}
						</li>
					{% endfor %}
				</ol>
			</nav>
			<main class="content">
				{% if current_article %}
					<div class="title-with-source-edit">
						<h1>{{ current_article.title }}</h1>
						<a class="material-icon" href="{{ current_article_source_url }}" target="_blank"></a>
					</div>
				{% endif %}
				{{ content }}
			</main>
		</div>
		<footer>
			<div class="middle-aligner">
				<div class="meta">
					Copyright Â© 2014 - {{ "now" | date: "%Y" }} Bitrise Ltd.
					<br>
					<em>Powered by <a href="https://jekyllrb.com/">Jekyll</a></em>
				</div>
			</div>
		</footer>
	</body>
	<script>
		var sjs = SimpleJekyllSearch({
			searchInput: document.getElementById('search-input'),
			resultsContainer: document.getElementById('results-container'),
			json: '/search.json'
		});
	</script>
	<script>
		var sideMenu = document.getElementById('side-menu');

		function toggleSideBar() {
			sideMenu.classList.toggle("open");
		}
	</script>
</html>
